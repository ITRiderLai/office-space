# 数据大屏页面分析文档

## 一、页面概述

本页面为**红河哈尼彝族自治州党政机关办公用房**数据展示大屏，采用深蓝色科技风格，用于全面展示办公用房的统计数据和分布情况。

## 二、整体布局

页面采用**三栏布局**：

```
┌─────────────────────────────────────────────────────────────────────┐
│  日期时间          红河哈尼彝族自治州党政机关办公用房      用户信息  │
├─────────────┬───────────────────────────────┬───────────────────────┤
│             │     [统计卡片 - 7个指标]       │                       │
│  编制人数/  ├───────────────────────────────┤   房屋使用情况公布    │
│  办公人数   │                               │      (环形图)         │
│  (柱状图)   │                               │                       │
│             │         地图区域              ├───────────────────────┤
├─────────────┤        (红河州)               │                       │
│             │                               │   房屋面积类型        │
│  管理范围   │                               │      (饼图)           │
│  (柱状图)   ├───────────────────────────────┤                       │
│             │      房屋面积分布(柱状图)      │                       │
└─────────────┴───────────────────────────────┴───────────────────────┘
```

### 布局比例
- 左侧区域：约 20%
- 中间区域：约 50%
- 右侧区域：约 30%

## 三、各区域详细分析

### 3.1 顶部区域

| 位置 | 内容 | 说明 |
|------|------|------|
| 左侧 | 日期时间 | 格式：`2026年1月15日 星期四 10:52:20`，实时更新 |
| 中间 | 主标题 | "红河哈尼彝族自治州党政机关办公用房"，科技感字体样式 |
| 右侧 | 用户信息 | 用户图标 + 用户名 + 全屏按钮 + 退出按钮 |

**全屏功能：**
- 点击"全屏"按钮后，进入浏览器全屏模式
- 隐藏左侧菜单栏
- 隐藏顶部导航栏
- 隐藏浏览器标签页（使用 Fullscreen API）
- 再次点击或按 ESC 退出全屏

### 3.2 左侧区域

#### 3.2.1 编制人数/办公人数（分组柱状图）

**组件特点：**
- 标题样式：带装饰线的面板标题
- 图表类型：分组柱状图（双柱对比）
- 图例：编制人数（深蓝色）、办公人数（浅蓝色）

**数据结构：**
```typescript
interface StaffData {
  category: string      // 级别类型
  staffCount: number    // 编制人数
  workCount: number     // 办公人数
}

// 示例数据
const data: StaffData[] = [
  { category: '市级正职', staffCount: 4, workCount: 4 },
  { category: '市级副职', staffCount: 29, workCount: 31 },
  { category: '正局(处)级', staffCount: 169, workCount: 199 },
  { category: '副局(处)级', staffCount: 510, workCount: 610 },
  { category: '局(处)级以下', staffCount: 6083, workCount: 4189 }
]
```

**样式要点：**
- Y轴标签：单位（人）
- 柱子圆角：顶部圆角
- 数值标签：显示在柱子顶部

#### 3.2.2 管理范围（圆锥型图）

**组件特点：**
- 标题样式：带装饰线的面板标题
- 图表类型：圆锥型图（3D锥形柱状图），不同类别不同颜色
- 图例：党政（蓝色）、参公（绿色）、事业（橙色）、其他（红色）
- 视觉效果：锥形柱体，底部宽顶部窄，具有立体感

**数据结构：**
```typescript
interface ManagementData {
  category: string  // 类别
  value: number     // 数量
  color: string     // 颜色
}

// 示例数据
const data: ManagementData[] = [
  { category: '党政', value: 1130, color: '#3B82F6' },
  { category: '参公', value: 91, color: '#10B981' },
  { category: '事业', value: 188, color: '#F59E0B' },
  { category: '其他', value: 180, color: '#EF4444' }
]
```

**ECharts实现要点：**
- 使用 `pictorialBar` 类型实现圆锥效果
- 设置 `symbol: 'triangle'` 或自定义SVG路径
- 配合渐变色增强立体感

### 3.3 中间区域

#### 3.3.1 统计卡片（顶部）

**布局：** 7个统计指标横向排列

| 指标 | 单位 | 示例值 |
|------|------|--------|
| 单位总数 | 个 | 1589 |
| 院落总数 | 个 | 1142 |
| 楼宇总数 | 幢 | 1854 |
| 房屋面积总数 | m² | 1454128.95 |
| 土地面积总数 | m² | 3246132.94 |
| 编制人数 | 人 | 46545 |
| 办公人数 | 人 | 52326 |

**数据结构：**
```typescript
interface OverviewStats {
  unitCount: number        // 单位总数
  courtyardCount: number   // 院落总数
  buildingCount: number    // 楼宇总数
  buildingArea: number     // 房屋面积总数
  landArea: number         // 土地面积总数
  staffCount: number       // 编制人数
  workCount: number        // 办公人数
}
```

**样式要点：**
- 数值颜色：青色高亮（#00D4FF）
- 单位颜色：白色
- 背景：半透明深蓝色

#### 3.3.2 地图区域（中部）

**组件特点：**
- 地图类型：红河哈尼彝族自治州行政区划图
- 交互：鼠标悬停高亮、点击选中
- 标注：显示各县市名称

**包含区域：**
- 泸西县、弥勒市、石屏县、建水县、开远市
- 红河县、元阳县、个旧市、蒙自市
- 屏边苗族自治县、绿春县
- 金平苗族瑶族傣族自治县、河口瑶族自治县

**数据结构：**
```typescript
interface RegionData {
  name: string      // 区域名称
  code: string      // 区域代码
  value?: number    // 相关数值（可选，用于热力图）
}
```

#### 3.3.3 房屋面积分布（底部柱状图）

**组件特点：**
- 标题样式：居中显示，带装饰框
- 图表类型：柱状图
- Y轴：单位（平方米）

**数据结构：**
```typescript
interface AreaDistribution {
  region: string   // 区域名称
  area: number     // 面积（平方米）
}

// 示例数据
const data: AreaDistribution[] = [
  { region: '个旧市', area: 131373.62 },
  { region: '开远市', area: 87621 },
  { region: '蒙自市', area: 300883.34 },
  { region: '弥勒市', area: 164300.2 },
  { region: '屏边苗族自治县', area: 77454.01 },
  { region: '建水县', area: 141599.19 },
  { region: '石屏县', area: 94048.77 },
  { region: '泸西县', area: 87905.12 },
  { region: '元阳县', area: 78667.32 },
  { region: '红河县', area: 97928.19 },
  { region: '金平苗族瑶族傣族自治县', area: 82667.4 },
  { region: '绿春县', area: 67601.66 },
  { region: '河口瑶族自治县', area: 0 }  // 待确认
]
```

**样式要点：**
- 柱子渐变色：从深蓝到浅蓝
- 数值标签：显示在柱子顶部
- X轴标签：区域名称（可能需要旋转或省略显示）

### 3.4 右侧区域

#### 3.4.1 房屋使用情况公布（环形图）

**组件特点：**
- 标题样式：带装饰线的面板标题
- 图表类型：环形饼图
- 图例位置：图表外侧，显示百分比

**数据结构：**
```typescript
interface UsageData {
  name: string   // 使用类型
  value: number  // 占比或数量
  color: string  // 颜色
}

// 示例数据
const data: UsageData[] = [
  { name: '自用', value: 60, color: '#3B82F6' },  // 蓝色
  { name: '闲置', value: 15, color: '#F59E0B' },  // 橙色
  { name: '出租', value: 10, color: '#06B6D4' },  // 青色
  { name: '出借', value: 5, color: '#8B5CF6' }    // 紫色
]
```

**样式要点：**
- 环形内部可显示总计或主要指标
- 百分比标签在外侧，带指引线

#### 3.4.2 房屋面积类型（饼图）

**组件特点：**
- 标题样式：带装饰线的面板标题
- 图表类型：饼图
- 图例位置：图表上方水平排列

**数据结构：**
```typescript
interface AreaTypeData {
  name: string   // 面积类型
  value: number  // 占比或数量
  color: string  // 颜色
}

// 示例数据
const data: AreaTypeData[] = [
  { name: '办公用房', value: 30, color: '#3B82F6' },   // 蓝色
  { name: '服务用房', value: 30, color: '#F59E0B' },   // 橙色
  { name: '设备用房', value: 20, color: '#06B6D4' },   // 青色
  { name: '附属用房', value: 10, color: '#10B981' },   // 绿色
  { name: '技术业务用房', value: 10, color: '#EF4444' } // 红色
]
```

## 四、组件清单

| 组件名称 | 文件路径 | 说明 |
|----------|----------|------|
| DataScreen | `views/dataScreen/index.vue` | 大屏主页面 |
| ScreenHeader | `views/dataScreen/components/ScreenHeader.vue` | 顶部标题栏 |
| StatsCard | `views/dataScreen/components/StatsCard.vue` | 统计卡片 |
| StaffChart | `views/dataScreen/components/StaffChart.vue` | 编制人数/办公人数图表 |
| ManagementChart | `views/dataScreen/components/ManagementChart.vue` | 管理范围圆锥型图表 |
| RegionMap | `views/dataScreen/components/RegionMap.vue` | 地图组件 |
| AreaDistributionChart | `views/dataScreen/components/AreaDistributionChart.vue` | 房屋面积分布图表 |
| UsageChart | `views/dataScreen/components/UsageChart.vue` | 房屋使用情况图表 |
| AreaTypeChart | `views/dataScreen/components/AreaTypeChart.vue` | 房屋面积类型图表 |
| PanelTitle | `views/dataScreen/components/PanelTitle.vue` | 面板标题组件 |

## 五、API 接口设计

### 5.1 获取大屏数据

```typescript
// GET /api/dataScreen/overview
interface DataScreenOverview {
  stats: OverviewStats           // 顶部统计数据
  staffData: StaffData[]         // 编制人数/办公人数数据
  managementData: ManagementData[] // 管理范围数据
  areaDistribution: AreaDistribution[] // 房屋面积分布
  usageData: UsageData[]         // 房屋使用情况
  areaTypeData: AreaTypeData[]   // 房屋面积类型
}
```

## 六、背景图片资源

所有背景图片位于 `assets/dashboard/` 目录下。

### 6.1 背景图片映射

| 区域 | 背景图片 | 说明 |
|------|----------|------|
| 页面整体 | `bg-page.png` | 大屏页面主背景 |
| 顶部标题栏 | `bg-大标题.png` | 顶部区域背景 |
| 统计卡片 | `bg-统计卡片.png` | 中间顶部7个统计指标区域 |
| 房屋面积分布 | `bg-房屋面积分布.png` | 中间底部柱状图区域 |

### 6.2 卡片切图模式

以下卡片使用标题+内容分离的切图模式（与首页工作台一致）：

- 编制人数/办公人数
- 管理范围
- 房屋使用情况公布
- 房屋面积类型

| 部分 | 背景图片 | 定位方式 |
|------|----------|----------|
| 标题 | `bg-title.png` | `position: absolute; top: -16px; left: 25px; right: 25px;` |
| 内容 | `bg-cont.png` | 正常流布局，`padding-top: 40px` 为标题留出空间 |

**使用示例：**
```vue
<template>
  <div class="chart-card">
    <PanelTitle title="编制人数/办公人数" absolute />
    <div class="chart-container">
      <!-- 图表内容 -->
    </div>
  </div>
</template>

<style scoped>
.chart-card {
  position: relative;
  height: 100%;
}

.chart-container {
  height: 100%;
  padding-top: 40px;
  box-sizing: border-box;
  background-image: url('@/assets/dashboard/bg-cont.png');
  background-size: 100% 100%;
}
</style>
```

## 七、样式规范

### 7.1 配色方案

| 用途 | 颜色值 | 说明 |
|------|--------|------|
| 背景色 | #0a1929 | 深蓝色主背景 |
| 主题色 | #00d4ff | 青色高亮 |
| 标题色 | #ffffff | 白色 |
| 次要文字 | rgba(255,255,255,0.7) | 半透明白色 |
| 边框色 | rgba(0,212,255,0.3) | 半透明青色 |
| 图表色1 | #3B82F6 | 蓝色 |
| 图表色2 | #10B981 | 绿色 |
| 图表色3 | #F59E0B | 橙色 |
| 图表色4 | #EF4444 | 红色 |
| 图表色5 | #8B5CF6 | 紫色 |
| 图表色6 | #06B6D4 | 青色 |

### 7.2 字体规范

| 用途 | 字号 | 字重 |
|------|------|------|
| 主标题 | 28px | 700 |
| 面板标题 | 16px | 500 |
| 统计数值 | 24px | 700 |
| 统计标签 | 12px | 400 |
| 图表标签 | 12px | 400 |
| 日期时间 | 14px | 400 |

### 7.3 间距规范

| 用途 | 间距 |
|------|------|
| 栏间距 | 20px |
| 组件间距 | 15px |
| 内边距 | 15px |

## 八、技术要点

1. **响应式设计**：大屏页面通常采用固定分辨率（如1920x1080），可使用CSS transform进行缩放适配
2. **数据实时更新**：顶部时间实时刷新，数据可设置定时轮询
3. **ECharts配置**：使用ECharts实现所有图表，注意配置项的统一管理
4. **地图数据**：使用红河州GeoJSON数据，可从DataV获取
5. **性能优化**：大屏数据量大，注意图表的按需渲染和销毁

## 九、交互说明

1. **全屏功能**：
   - 点击"全屏"按钮：进入浏览器全屏模式，隐藏左侧菜单、顶部导航、浏览器标签页
   - 全屏状态下按钮变为"退出全屏"
   - 点击"退出全屏"或按 ESC 键：退出全屏模式，恢复正常布局
   - 实现方式：使用浏览器 Fullscreen API

   ```typescript
   // 全屏切换实现
   const isFullscreen = ref(false)

   const toggleFullscreen = async () => {
     if (!document.fullscreenElement) {
       await document.documentElement.requestFullscreen()
       isFullscreen.value = true
     } else {
       await document.exitFullscreen()
       isFullscreen.value = false
     }
   }

   // 监听全屏状态变化
   document.addEventListener('fullscreenchange', () => {
     isFullscreen.value = !!document.fullscreenElement
   })
   ```

2. **地图交互**：
   - 鼠标悬停：高亮显示区域，显示tooltip
   - 点击：可跳转到该区域详情或筛选数据

3. **图表交互**：
   - 鼠标悬停：显示详细数据tooltip
   - 图例点击：可切换数据显示/隐藏

4. **退出按钮**：
   - 点击退出登录，返回登录页
