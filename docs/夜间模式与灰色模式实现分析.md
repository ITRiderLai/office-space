# å¤œé—´æ¨¡å¼ä¸ç°è‰²æ¨¡å¼å®ç°åˆ†æ

## 1. æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸¤ç§è§†è§‰æ¨¡å¼åˆ‡æ¢åŠŸèƒ½ï¼š

| æ¨¡å¼ | çŠ¶æ€å­—æ®µ | å®ç°æ–¹å¼ | ç”¨é€” |
|------|----------|----------|------|
| å¤œé—´æ¨¡å¼ (Dark Mode) | `appStore.theme` | layui-vue ä¸»é¢˜ç³»ç»Ÿ + è‡ªå®šä¹‰æ ·å¼è¦†ç›– | å‡å°‘å¤œé—´ä½¿ç”¨æ—¶çš„è§†è§‰ç–²åŠ³ |
| ç°è‰²æ¨¡å¼ (Grey Mode) | `appStore.greyMode` | CSS `filter: grayscale()` æ»¤é•œ | å“€æ‚¼æ¨¡å¼ã€ç‰¹æ®Šçºªå¿µæ—¥ |

---

## 2. ç°è‰²æ¨¡å¼å®ç°

### 2.1 å®ç°åŸç†

ç°è‰²æ¨¡å¼é‡‡ç”¨ **CSS æ»¤é•œ** æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨æ ¹å¸ƒå±€å®¹å™¨ä¸Šæ·»åŠ  `grey-mode` ç±»ï¼Œå¯¹æ•´ä¸ªé¡µé¢åº”ç”¨ç°åº¦æ»¤é•œã€‚

### 2.2 æ•°æ®æµ

```
ç”¨æˆ·ç‚¹å‡»å¼€å…³
    â”‚
    â–¼
GlobalSetup.vue
<lay-switch v-model="appStore.greyMode" />
    â”‚
    â–¼
appStore.greyMode = true/false
    â”‚
    â–¼
BasicLayout.vue (å“åº”å¼ç»‘å®š)
:class="appStore.greyMode ? 'grey-mode' : ''"
    â”‚
    â–¼
CSS æ ·å¼ç”Ÿæ•ˆ
.grey-mode { filter: grayscale(1); }
```

### 2.3 æ ¸å¿ƒä»£ç 

#### çŠ¶æ€å®šä¹‰ (`src/store/app.ts`)

```typescript
export const useAppStore = defineStore({
  id: 'app',
  state: () => ({
    greyMode: false,  // ç°è‰²æ¨¡å¼å¼€å…³
    // ...
  }),
  persist: {
    storage: localStorage,
    paths: ['greyMode', /* ... */],  // æŒä¹…åŒ–å­˜å‚¨
  }
})
```

#### è®¾ç½®é¢æ¿ (`src/layouts/global/GlobalSetup.vue`)

```vue
<global-setup-item label="ç°è‰²æ¨¡å¼">
  <lay-switch v-model="appStore.greyMode" size="xs"></lay-switch>
</global-setup-item>
```

#### å¸ƒå±€åº”ç”¨ (`src/layouts/BasicLayout.vue`)

```vue
<template>
  <lay-layout
    :class="[
      appStore.greyMode ? 'grey-mode' : ''
    ]"
  >
    <!-- ... -->
  </lay-layout>
</template>

<style lang="less">
.grey-mode {
  filter: grayscale(1);
}
</style>
```

### 2.4 æŠ€æœ¯ç‰¹ç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| å®ç°ç®€å• | ä»…éœ€ä¸€è¡Œ CSS æ»¤é•œä»£ç  |
| å…¨å±€ç”Ÿæ•ˆ | åº”ç”¨äºæ ¹å®¹å™¨ï¼Œå­å…ƒç´ è‡ªåŠ¨ç»§æ‰¿ |
| æ€§èƒ½å¼€é”€ | å­˜åœ¨ä¸€å®šæ¸²æŸ“æ€§èƒ½å¼€é”€ï¼ˆGPU æ»¤é•œï¼‰ |
| å…¼å®¹æ€§ | ç°ä»£æµè§ˆå™¨å‡æ”¯æŒ `filter` å±æ€§ |

### 2.5 æ•ˆæœç¤ºæ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­£å¸¸æ¨¡å¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  å½©è‰²å›¾æ ‡  å½©è‰²æŒ‰é’®        â”‚
â”‚  â”‚ ğŸ”µ  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼ filter: grayscale(1)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç°è‰²æ¨¡å¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  ç°è‰²å›¾æ ‡  ç°è‰²æŒ‰é’®        â”‚
â”‚  â”‚ âš«  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. å¤œé—´æ¨¡å¼å®ç°

### 3.1 å®ç°åŸç†

å¤œé—´æ¨¡å¼é‡‡ç”¨ **å¤šå±‚æ¬¡ä¸»é¢˜ç³»ç»Ÿ**ï¼š

1. **layui-vue ç»„ä»¶åº“**ï¼šé€šè¿‡ `lay-config-provider` çš„ `theme` å±æ€§æ§åˆ¶
2. **CSS å˜é‡ç³»ç»Ÿ**ï¼šæ¡†æ¶è‡ªåŠ¨åˆ‡æ¢ `--global-*` å’Œ `--darkreader-bg--*` å˜é‡
3. **è‡ªå®šä¹‰æ ·å¼è¦†ç›–**ï¼šé’ˆå¯¹ç‰¹å®šç»„ä»¶ç¼–å†™ `[data-theme='dark']` é€‰æ‹©å™¨æ ·å¼

### 3.2 æ•°æ®æµ

```
ç”¨æˆ·ç‚¹å‡»å¼€å…³
    â”‚
    â–¼
GlobalSetup.vue
<lay-switch v-model="appStore.theme"
            onswitch-value="dark"
            unswitch-value="light" />
    â”‚
    â–¼
appStore.theme = 'dark' / 'light'
    â”‚
    â–¼
BasicLayout.vue
<lay-config-provider :theme="appStore.theme">
    â”‚
    â–¼
layui-vue æ¡†æ¶å¤„ç†
    â”œâ”€â”€â–º åœ¨ DOM ä¸Šæ·»åŠ  data-theme="dark" å±æ€§
    â”œâ”€â”€â–º æ·»åŠ  .layui-theme-dark ç±»å
    â””â”€â”€â–º è‡ªåŠ¨ç”Ÿæˆ --darkreader-bg--* CSS å˜é‡
    â”‚
    â–¼
ç»„ä»¶æ ·å¼å“åº”
    â”œâ”€â”€â–º æ¡†æ¶ç»„ä»¶è‡ªåŠ¨åˆ‡æ¢é…è‰²
    â””â”€â”€â–º è‡ªå®šä¹‰ç»„ä»¶é€šè¿‡é€‰æ‹©å™¨è¦†ç›–æ ·å¼
```

### 3.3 æ ¸å¿ƒä»£ç 

#### çŠ¶æ€å®šä¹‰ (`src/store/app.ts`)

```typescript
export const useAppStore = defineStore({
  id: 'app',
  state: () => ({
    theme: 'light',  // ä¸»é¢˜æ¨¡å¼ï¼š'light' | 'dark'
    themeVariable: {
      "--global-checked-color": "#5fb878",
      "--global-primary-color": "#009688",
      "--global-normal-color": "#1e9fff",
      "--global-danger-color": "#ff5722",
      "--global-warm-color": "#ffb800",
      "--global-border-radius": "4px"
    },
    // ...
  }),
  persist: {
    storage: localStorage,
    paths: ['theme', 'themeVariable', /* ... */],
  }
})
```

#### è®¾ç½®é¢æ¿ (`src/layouts/global/GlobalSetup.vue`)

```vue
<global-setup-item label="å¤œé—´æ¨¡å¼">
  <lay-switch
    v-model="appStore.theme"
    onswitch-value="dark"
    unswitch-value="light"
    size="xs"
  ></lay-switch>
</global-setup-item>
```

#### ä¸»é¢˜é…ç½®æä¾› (`src/layouts/BasicLayout.vue`)

```vue
<template>
  <lay-config-provider
    :themeVariable="appStore.themeVariable"
    :theme="appStore.theme"
  >
    <lay-layout>
      <!-- å¸ƒå±€å†…å®¹ -->
    </lay-layout>
  </lay-config-provider>
</template>
```

### 3.4 layui-vue ä¸»é¢˜ç³»ç»Ÿå·¥ä½œåŸç†

#### 3.4.1 DOM å˜åŒ–

å½“ `theme="dark"` æ—¶ï¼Œlayui-vue ä¼šï¼š

```html
<!-- æ—¥é—´æ¨¡å¼ -->
<body>
  <div class="layui-config-provider">...</div>
</body>

<!-- å¤œé—´æ¨¡å¼ -->
<body data-theme="dark">
  <div class="layui-config-provider layui-theme-dark">...</div>
</body>
```

#### 3.4.2 CSS å˜é‡è‡ªåŠ¨ç”Ÿæˆ

layui-vue ä¼šä¸ºæ¯ä¸ªä¸»é¢˜å˜é‡ç”Ÿæˆå¯¹åº”çš„ darkreader å˜é‡ï¼š

```css
/* åŸå§‹å˜é‡ */
--global-primary-color: #009688;

/* å¤œé—´æ¨¡å¼è‡ªåŠ¨ç”Ÿæˆ */
--darkreader-bg--global-primary-color: #1a7a6e;  /* è‡ªåŠ¨è°ƒæ•´çš„æš—è‰²ç‰ˆæœ¬ */
```

#### 3.4.3 é€‰æ‹©å™¨ä¼˜å…ˆçº§

```css
/* å¤œé—´æ¨¡å¼é€‰æ‹©å™¨ï¼ˆä¸¤ç§æ–¹å¼éƒ½éœ€è¦æ”¯æŒï¼‰ */
[data-theme='dark'] .your-selector { }
.layui-theme-dark .your-selector { }

/* æ¨èåŒæ—¶ä½¿ç”¨ä»¥ç¡®ä¿å…¼å®¹æ€§ */
[data-theme='dark'] .your-selector,
.layui-theme-dark .your-selector {
  /* å¤œé—´æ¨¡å¼æ ·å¼ */
}
```

### 3.5 è‡ªå®šä¹‰ç»„ä»¶å¤œé—´æ¨¡å¼é€‚é…

#### 3.5.1 é¢œè‰²è§„èŒƒ

| åœºæ™¯ | æ—¥é—´æ¨¡å¼ | å¤œé—´æ¨¡å¼ |
|------|----------|----------|
| é¡µé¢èƒŒæ™¯ | `#f0f2f5` | `#141414` |
| å¡ç‰‡/é¢æ¿èƒŒæ™¯ | `#ffffff` | `#1f1f1f` |
| ä¸»è¦æ–‡å­— | `#333333` | `rgba(255,255,255,0.85)` |
| æ¬¡è¦æ–‡å­— | `#666666` | `rgba(255,255,255,0.65)` |
| è¾¹æ¡† | `#e8e8e8` | `#434343` |
| å¯¼èˆªèƒŒæ™¯ | ä¸»é¢˜è‰²ï¼ˆå½©è‰²ï¼‰ | `#1f1f1f`ï¼ˆæ·±è‰²ï¼‰ |

#### 3.5.2 ä¸»é¢˜è‰²èƒŒæ™¯å…ƒç´ çš„ç‰¹æ®Šå¤„ç†

**å…³é”®åŸåˆ™**ï¼šå¤œé—´æ¨¡å¼ä¸‹ï¼ŒåŸæœ¬ä½¿ç”¨ä¸»é¢˜è‰²çš„èƒŒæ™¯éœ€è¦æ›¿æ¢ä¸ºæ·±è‰²ã€‚

```css
/* æ—¥é—´æ¨¡å¼ - ä¸»é¢˜è‰²èƒŒæ™¯ */
.top-header {
  background-color: var(--global-primary-color) !important;
}

/* å¤œé—´æ¨¡å¼ - éœ€è¦è¦†ç›–ä¸¤ä¸ªå˜é‡ */
[data-theme='dark'] .top-header,
.layui-theme-dark .top-header {
  --global-primary-color: #1f1f1f;
  --darkreader-bg--global-primary-color: #1f1f1f;
  background: #1f1f1f !important;
  background-color: #1f1f1f !important;
}
```

**ä¸ºä»€ä¹ˆéœ€è¦è¦†ç›– `--darkreader-bg--*` å˜é‡ï¼Ÿ**

layui-vue çš„ä¸»é¢˜ç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ `--darkreader-bg--global-primary-color` å˜é‡å¹¶ç”¨äºèƒŒæ™¯è‰²ã€‚å¦‚æœåªè¦†ç›–åŸå§‹å˜é‡ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„å˜é‡ä»ä¼šç”Ÿæ•ˆï¼Œå¯¼è‡´æ ·å¼è¦†ç›–å¤±è´¥ã€‚

#### 3.5.3 å›¾æ ‡é¢œè‰²é€‚é…

```css
/* æ—¥é—´æ¨¡å¼ - ä¸»é¢˜è‰²èƒŒæ™¯ä¸Šçš„ç™½è‰²å›¾æ ‡ */
.header-icon {
  color: rgba(255, 255, 255, 0.85);
}
.header-icon:hover {
  color: #fff;
}

/* å¤œé—´æ¨¡å¼ - æ·±è‰²èƒŒæ™¯ä¸Šçš„æµ…ç°å›¾æ ‡ï¼Œæ‚¬åœç”¨ä¸»é¢˜è‰²é«˜äº® */
[data-theme='dark'] .header-icon,
.layui-theme-dark .header-icon {
  color: rgba(255, 255, 255, 0.65);
}

[data-theme='dark'] .header-icon:hover,
.layui-theme-dark .header-icon:hover {
  color: var(--global-primary-color);  /* æ‚¬åœæ—¶ç”¨ä¸»é¢˜è‰² */
  background: rgba(255, 255, 255, 0.05);
}
```

### 3.6 æŠ€æœ¯æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ GlobalSetup â”‚   â”‚ å…¶ä»–ç»„ä»¶    â”‚   â”‚ ä¸šåŠ¡é¡µé¢    â”‚       â”‚
â”‚  â”‚ (è®¾ç½®é¢æ¿)  â”‚   â”‚             â”‚   â”‚             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŠ¶æ€ç®¡ç†å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    appStore (Pinia)                  â”‚   â”‚
â”‚  â”‚  theme: 'light' | 'dark'                            â”‚   â”‚
â”‚  â”‚  themeVariable: { --global-primary-color, ... }     â”‚   â”‚
â”‚  â”‚  greyMode: boolean                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                 â”‚
â”‚                    localStorage æŒä¹…åŒ–                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¸ƒå±€æ¸²æŸ“å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              lay-config-provider                     â”‚   â”‚
â”‚  â”‚  :theme="appStore.theme"                            â”‚   â”‚
â”‚  â”‚  :themeVariable="appStore.themeVariable"            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â–¼                         â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ layui-vue ç»„ä»¶    â”‚    â”‚ è‡ªå®šä¹‰ç»„ä»¶         â”‚           â”‚
â”‚  â”‚ (è‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢)    â”‚    â”‚ (éœ€æ‰‹åŠ¨é€‚é…)       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ ·å¼å®ç°å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ CSS å˜é‡ç³»ç»Ÿ        â”‚   â”‚ é€‰æ‹©å™¨è¦†ç›–          â”‚         â”‚
â”‚  â”‚ --global-*          â”‚   â”‚ [data-theme='dark'] â”‚         â”‚
â”‚  â”‚ --darkreader-bg--*  â”‚   â”‚ .layui-theme-dark   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ CSS æ»¤é•œ (ç°è‰²æ¨¡å¼) â”‚                                   â”‚
â”‚  â”‚ .grey-mode {        â”‚                                   â”‚
â”‚  â”‚   filter: grayscale(1)                                  â”‚
â”‚  â”‚ }                   â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ä¸¤ç§æ¨¡å¼å¯¹æ¯”

| å¯¹æ¯”é¡¹ | ç°è‰²æ¨¡å¼ | å¤œé—´æ¨¡å¼ |
|--------|----------|----------|
| å®ç°å¤æ‚åº¦ | ç®€å•ï¼ˆ1è¡ŒCSSï¼‰ | å¤æ‚ï¼ˆå¤šå±‚æ¶æ„ï¼‰ |
| çŠ¶æ€å€¼ç±»å‹ | `boolean` | `string` ('light'/'dark') |
| å®ç°æ–¹å¼ | CSS æ»¤é•œ | CSS å˜é‡ + é€‰æ‹©å™¨ |
| æ¡†æ¶ä¾èµ– | æ—  | layui-vue ä¸»é¢˜ç³»ç»Ÿ |
| æ€§èƒ½å½±å“ | GPU æ»¤é•œå¼€é”€ | CSS å˜é‡åˆ‡æ¢ï¼Œå¼€é”€å° |
| å¯å®šåˆ¶æ€§ | ä½ï¼ˆå…¨å±€ç°åº¦ï¼‰ | é«˜ï¼ˆå¯ç²¾ç»†æ§åˆ¶æ¯ä¸ªç»„ä»¶ï¼‰ |
| æ–°ç»„ä»¶é€‚é… | è‡ªåŠ¨é€‚é… | éœ€è¦æ‰‹åŠ¨ç¼–å†™å¤œé—´æ ·å¼ |
| å…¸å‹ç”¨é€” | å“€æ‚¼æ—¥ã€çºªå¿µæ´»åŠ¨ | æ—¥å¸¸ä½¿ç”¨ã€æŠ¤çœ¼ |

---

## 5. å¼€å‘æŒ‡å—

### 5.1 ç°è‰²æ¨¡å¼

æ— éœ€é¢å¤–å¼€å‘ï¼Œæ‰€æœ‰ç»„ä»¶è‡ªåŠ¨ç»§æ‰¿ç°åº¦æ»¤é•œæ•ˆæœã€‚

### 5.2 å¤œé—´æ¨¡å¼é€‚é…æ¸…å•

å¼€å‘æ–°ç»„ä»¶æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ£€æŸ¥å¤œé—´æ¨¡å¼å…¼å®¹æ€§ï¼š

```
â–¡ 1. æ£€æŸ¥æ˜¯å¦æœ‰ç¡¬ç¼–ç é¢œè‰²å€¼
      - èƒŒæ™¯è‰²ï¼š#fff, #f5f5f5, whitesmoke ç­‰
      - æ–‡å­—è‰²ï¼š#333, #666, #999 ç­‰
      - è¾¹æ¡†è‰²ï¼š#eee, #ddd ç­‰

â–¡ 2. æ£€æŸ¥ä¸»é¢˜è‰²èƒŒæ™¯å…ƒç´ 
      - ä½¿ç”¨ var(--global-primary-color) çš„èƒŒæ™¯
      - éœ€è¦åœ¨å¤œé—´æ¨¡å¼ä¸‹æ›¿æ¢ä¸ºæ·±è‰²

â–¡ 3. ç¼–å†™å¤œé—´æ¨¡å¼æ ·å¼
      - ä½¿ç”¨ [data-theme='dark'] å’Œ .layui-theme-dark é€‰æ‹©å™¨
      - åŒæ—¶è¦†ç›– --darkreader-bg--* å˜é‡ï¼ˆå¦‚é€‚ç”¨ï¼‰

â–¡ 4. æµ‹è¯•éªŒè¯
      - åˆ‡æ¢åˆ°å¤œé—´æ¨¡å¼æ£€æŸ¥æ˜¾ç¤ºæ•ˆæœ
      - éªŒè¯æ–‡å­—å¯è¯»æ€§ã€å¯¹æ¯”åº¦
      - æ£€æŸ¥äº¤äº’çŠ¶æ€ï¼ˆæ‚¬åœã€é€‰ä¸­ç­‰ï¼‰
```

### 5.3 ç¤ºä¾‹æ¨¡æ¿

```css
/* ================================
   ç»„ä»¶åç§° - å¤œé—´æ¨¡å¼é€‚é…
   ================================ */

/* æ—¥é—´æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ */
.my-component {
  background-color: #fff;
  color: #333;
  border: 1px solid #e8e8e8;
}

.my-component:hover {
  background-color: #f5f5f5;
}

/* å¤œé—´æ¨¡å¼ */
[data-theme='dark'] .my-component,
.layui-theme-dark .my-component {
  background-color: #1f1f1f;
  color: rgba(255, 255, 255, 0.85);
  border-color: #434343;
}

[data-theme='dark'] .my-component:hover,
.layui-theme-dark .my-component:hover {
  background-color: #2a2a2a;
}
```

---

## 6. ç›¸å…³æ–‡ä»¶ç´¢å¼•

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/store/app.ts` | çŠ¶æ€å®šä¹‰ï¼ˆtheme, greyModeï¼‰ |
| `src/layouts/BasicLayout.vue` | ä¸»é¢˜é…ç½®æä¾›ã€ç°è‰²æ¨¡å¼ç±»ç»‘å®š |
| `src/layouts/global/GlobalSetup.vue` | ç”¨æˆ·è®¾ç½®é¢æ¿ |
| `src/styles/admin.css` | å…¨å±€ç®¡ç†æ ·å¼ |
| `docs/é¡¹ç›®å¼€å‘æ–‡æ¡£.md` ç¬¬9èŠ‚ | å¤œé—´æ¨¡å¼å¼€å‘è§„èŒƒ |

---

## 7. å¸¸è§é—®é¢˜

### Q1: å¤œé—´æ¨¡å¼ä¸‹æŸäº›å…ƒç´ é¢œè‰²æ²¡æœ‰å˜åŒ–ï¼Ÿ

**åŸå› **ï¼šlayui-vue è‡ªåŠ¨ç”Ÿæˆçš„ `--darkreader-bg--*` å˜é‡è¦†ç›–äº†è‡ªå®šä¹‰æ ·å¼ã€‚

**è§£å†³**ï¼šåŒæ—¶è¦†ç›–åŸå§‹å˜é‡å’Œ darkreader å˜é‡ã€‚

```css
[data-theme='dark'] .element {
  --global-primary-color: #1f1f1f;
  --darkreader-bg--global-primary-color: #1f1f1f;
  background-color: #1f1f1f !important;
}
```

### Q2: ç°è‰²æ¨¡å¼ä¸‹æŸäº›å…ƒç´ ä»æœ‰é¢œè‰²ï¼Ÿ

**åŸå› **ï¼šå…ƒç´ ä½¿ç”¨äº† `isolation: isolate` æˆ–åˆ›å»ºäº†æ–°çš„å †å ä¸Šä¸‹æ–‡ã€‚

**è§£å†³**ï¼šå¯¹è¯¥å…ƒç´ å•ç‹¬åº”ç”¨æ»¤é•œï¼Œæˆ–æ£€æŸ¥æ˜¯å¦å¿…è¦ä½¿ç”¨ isolationã€‚

### Q3: ä¸»é¢˜åˆ‡æ¢æ—¶é¡µé¢é—ªçƒï¼Ÿ

**åŸå› **ï¼šCSS å˜é‡åˆ‡æ¢æœ‰å»¶è¿Ÿã€‚

**è§£å†³**ï¼šç¡®ä¿ `lay-config-provider` åŒ…è£¹åœ¨æœ€å¤–å±‚ï¼Œå‡å°‘åµŒå¥—å±‚çº§ã€‚
