# 办公用房管理系统 - 项目开发文档

## 1. 项目概述

### 1.1 项目名称
办公用房管理系统

### 1.2 项目描述
本系统是一个综合性的办公用房管理后台系统，用于管理政府机关单位的办公用房资源，包括房屋信息管理、院落楼宇管理、业务申请审批、数据台账、统计分析等功能模块。

### 1.3 技术栈建议
- **前端框架**: Vue 3 + TypeScript
- **UI组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router
- **HTTP请求**: Axios
- **图表库**: ECharts
- **地图组件**: 高德地图/百度地图 API
- **构建工具**: Vite
- **CSS预处理**: SCSS/Less

---

## 2. 页面设计分析

### 2.1 页面清单

| 序号 | 页面名称 | 路由路径 | 描述 |
|------|---------|---------|------|
| 1 | 登录页 | `/login` | 系统登录入口 |
| 2 | 首页/工作台 | `/dashboard` | 系统主页，数据概览 |
| 3 | 数据大屏 | `/screen` | 数据可视化大屏展示 |
| 4 | 院落编辑 | `/courtyard/edit` | 院落楼宇图纸编辑 |
| 5 | 权属申请 | `/business/ownership` | 业务申请表单 |
| 6 | 出借台账 | `/ledger/lending` | 出借数据台账管理 |
| 7 | 单位卡片 | `/unit/card` | 单位详情卡片展示 |

---

## 3. 页面详细设计

### 3.1 登录页 (Login)

#### 页面布局
- 全屏背景图（办公场景）
- 居中登录卡片

#### 组件结构
```
LoginPage
├── BackgroundImage          # 背景图片
└── LoginCard               # 登录卡片
    ├── Logo                # 系统Logo
    ├── Title               # 系统名称 "办公用房管理系统"
    ├── LoginForm           # 登录表单
    │   ├── UsernameInput   # 用户名输入框（带用户图标）
    │   ├── PasswordInput   # 密码输入框（带锁图标）
    │   ├── CaptchaInput    # 验证码输入框
    │   ├── CaptchaImage    # 验证码图片
    │   └── RememberMe      # 记住我复选框
    └── SubmitButton        # 登录按钮
```

#### 表单字段
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| username | string | 是 | 用户名 |
| password | string | 是 | 密码 |
| captcha | string | 是 | 验证码 |
| remember | boolean | 否 | 记住登录状态 |

#### 功能需求
- 表单验证（必填校验）
- 验证码刷新功能
- 登录成功后跳转首页
- 记住用户名功能

---

### 3.2 首页/工作台 (Dashboard)

#### 页面布局
- 左侧：侧边栏菜单（深蓝色主题）
- 顶部：面包屑导航 + 用户信息
- 主区域：地图 + 数据统计卡片 + 图表

#### 组件结构
```
DashboardPage
├── Sidebar                    # 侧边栏
│   ├── Logo                   # 系统Logo
│   ├── UserInfo               # 用户信息（头像、用户名、状态）
│   └── MenuList               # 菜单列表
├── Header                     # 顶部栏
│   ├── Breadcrumb             # 面包屑
│   ├── FullscreenBtn          # 全屏按钮
│   └── UserDropdown           # 用户下拉菜单
└── MainContent                # 主内容区
    ├── MapSection             # 地图区域（左侧）
    │   ├── ZoomControls       # 缩放控制
    │   └── ViewToggle         # 区域/地图切换
    ├── StatsSection           # 统计区域（右侧）
    │   ├── OverviewCards      # 总体概况卡片
    │   │   ├── UnitCount      # 单位个数
    │   │   ├── StaffCount     # 编制人数
    │   │   ├── BuildingCount  # 院落/楼宇数
    │   │   ├── OfficeArea     # 办公用房面积
    │   │   └── LandArea       # 土地面积
    │   ├── OrgTypeChart       # 机构类型横向柱状图
    │   ├── StaffChart         # 编制人数图表
    │   ├── UsageChart         # 使用情况饼图
    │   └── AreaChart          # 办公用房面积柱状图
    └── QuickAccess            # 快捷入口
        ├── TabNav             # 标签页导航
        │   ├── 常用工具
        │   ├── 政策法规
        │   └── 通知公告
        └── ToolCards          # 工具卡片
            ├── AreaCalculate  # 办公用房面积核算
            ├── UserManual     # 用户手册
            ├── PolicyReg      # 政策法规
            └── Notice         # 通知公告
```

#### 菜单结构
```
├── 首页
├── 业务申请
│   ├── 权属申请
│   ├── 配置申请
│   ├── 维护申请
│   └── 处置申请
├── 单位管理
│   ├── 组织架构
│   ├── 单位编辑
│   ├── 人员信息
│   └── 单位卡片
├── 院落管理
│   ├── 院落编辑
│   ├── 院落卡片
│   └── 土地管理
├── 技术业务用房管理
├── 业务查询
├── 数据台账
│   ├── 出借台账
│   ├── 出租台账
│   ├── 闲置台账
│   ├── 房间台账
│   └── 领导干部用房台账
├── 统计分析
├── 基础配置
├── 权属档案
├── 系统管理
└── 系统监控
```

#### 数据统计卡片
| 指标 | 图标 | 单位 |
|-----|------|------|
| 单位个数 | 建筑图标 | 个 |
| 编制人数 | 人员图标 | 人 |
| 院落/楼宇 | 建筑图标 | 个 |
| 办公用房楼宇面积 | - | 万㎡ |
| 土地面积 | - | 万㎡ |

---

### 3.3 数据大屏 (DataScreen)

#### 页面布局
- 深色科技风主题
- 顶部：标题 + 时间 + 用户信息
- 三栏布局：左侧统计、中间地图、右侧分析

#### 组件结构
```
DataScreenPage
├── Header                     # 顶部
│   ├── DateTime               # 日期时间显示
│   ├── Title                  # 标题 "红河哈尼族彝族自治州党政机关办公用房"
│   └── UserInfo               # 用户信息 + 退出按钮
├── LeftPanel                  # 左侧面板
│   ├── StaffChart             # 编制人数/办公人数柱状图
│   ├── ManageHistory          # 管理沿革柱状图
│   └── AreaDistribution       # 房屋面积分布柱状图
├── CenterPanel                # 中间面板
│   ├── TopStats               # 顶部统计数据
│   │   ├── UnitCount          # 单位总数
│   │   ├── CourtyardCount     # 院落总数
│   │   ├── BuildingCount      # 楼宇总数
│   │   ├── BuildingArea       # 房屋面积总数
│   │   ├── LandArea           # 土地面积总数
│   │   ├── StaffCount         # 编制人数
│   │   └── OfficeCount        # 办公人数
│   └── MapView                # 地图展示（各区县标注）
└── RightPanel                 # 右侧面板
    ├── UsageDistribution      # 房屋使用情况分布（饼图）
    └── AreaTypeChart          # 房屋面积类型（饼图）
```

#### 颜色主题
- 背景色：深蓝色 (#0a1628)
- 边框色：蓝色渐变
- 强调色：青色 (#00d4ff)
- 图表配色：青色、绿色、黄色、橙色渐变

---

### 3.4 院落编辑页 (CourtyardEdit)

#### 页面布局
- 左侧：树形区域选择器
- 右侧：楼层图纸展示 + 操作工具栏

#### 组件结构
```
CourtyardEditPage
├── Sidebar                    # 左侧边栏
│   ├── SearchInput            # 关键词搜索
│   ├── ToolBar                # 工具栏（添加、删除、编辑、刷新）
│   └── TreeView               # 树形结构
│       └── TreeNode           # 树节点（省-市-区-院落-楼栋-楼层）
└── MainContent                # 主内容区
    ├── TabNav                 # 标签页
    │   ├── 楼层图纸
    │   ├── 楼层信息
    │   └── 楼层房屋
    ├── ToolBar                # 操作工具栏
    │   ├── RefreshBtn         # 刷新
    │   ├── FilterBtn          # 筛选
    │   ├── SelectBtn          # 框选
    │   ├── CancelSelectBtn    # 取消选择
    │   ├── PrintBtn           # 打印图纸
    │   ├── CancelTypeBindBtn  # 取消类型绑定
    │   ├── CancelUnitBindBtn  # 取消单位绑定
    │   ├── BindTypeBtn        # 绑定类型
    │   └── BindUnitBtn        # 绑定单位
    ├── FloorPlan              # 楼层平面图
    │   └── RoomBlocks         # 房间区块（显示面积、用途）
    └── FloorStats             # 楼层统计
        └── RoomSummary        # 未定义房间数、总面积
```

#### 树形数据结构
```typescript
interface TreeNode {
  id: string;
  name: string;
  type: 'province' | 'city' | 'district' | 'courtyard' | 'building' | 'floor';
  children?: TreeNode[];
  expanded?: boolean;
}
```

#### 功能需求
- 树形结构展开/折叠
- 关键词搜索过滤
- 楼层图纸缩放、平移
- 房间框选功能
- 房间类型/单位绑定
- 打印图纸功能

---

### 3.5 权属申请页 (OwnershipApplication)

#### 页面布局
- 顶部：业务信息栏
- 左侧：步骤导航
- 右侧：表单区域

#### 组件结构
```
OwnershipApplicationPage
├── Header                     # 顶部信息栏
│   ├── ActionButtons          # 操作按钮（保存、关闭）
│   └── BusinessInfo           # 业务信息
│       ├── BusinessType       # 业务类型
│       ├── BusinessNo         # 业务编号
│       ├── Handler            # 受理人员
│       └── CurrentStep        # 当前环节
├── StepNav                    # 左侧步骤导航
│   └── StepItem               # 步骤项（申请信息-高亮）
└── FormContent                # 表单内容
    └── ApplicationForm        # 申请表单
        ├── BusinessTypeField  # 业务类型（只读）
        ├── HandleDateField    # 办理日期（日期选择器）
        ├── DocTitleField      # 来文标题
        ├── DocNoField         # 来文文号
        ├── ApplyUnitField     # 申请单位（带搜索）
        ├── RelatedBuildingField # 关联楼宇（带搜索）
        ├── ContactField       # 联系人
        ├── ReceiveUnitField   # 主送单位
        ├── DocContentField    # 来文正文（文件上传）
        └── AttachmentField    # 来文附件（文件上传）
```

#### 表单字段
| 字段名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| businessType | string | - | 业务类型（只读：权属管理） |
| handleDate | date | 是 | 办理日期 |
| docTitle | string | 是 | 来文标题 |
| docNo | string | 是 | 来文文号 |
| applyUnit | string | 是 | 申请单位 |
| relatedBuilding | string | 否 | 关联楼宇 |
| contact | string | 否 | 联系人 |
| receiveUnit | string | 否 | 主送单位 |
| docContent | file | 否 | 来文正文 |
| attachment | file | 否 | 来文附件 |

---

### 3.6 出借台账页 (LendingLedger)

#### 页面布局
- 顶部：搜索条件区
- 中部：操作按钮区
- 底部：数据表格区

#### 组件结构
```
LendingLedgerPage
├── SearchForm                 # 搜索表单
│   ├── UnitNameInput          # 单位名称
│   ├── UnitTypeInput          # 单位性质
│   ├── OwnerInput             # 产权人
│   ├── CertNoInput            # 产权证号
│   ├── TenantInput            # 承租人
│   ├── ContractNoInput        # 合同编号
│   ├── StatusSelect           # 状态选择（所有）
│   ├── SearchBtn              # 搜索按钮
│   └── ResetBtn               # 重置按钮
├── ActionBar                  # 操作栏
│   ├── AddBtn                 # 添加按钮
│   ├── EditBtn                # 编辑按钮
│   ├── DeleteBtn              # 删除按钮
│   ├── ExportBtn              # 导出按钮
│   └── ViewToggle             # 视图切换
└── DataTable                  # 数据表格
    ├── SelectColumn           # 选择列
    ├── UnitNameColumn         # 单位名称
    ├── ReportUnitIdColumn     # 填报单位id
    ├── UnitTypeColumn         # 单位性质
    ├── BuildingColumn         # 楼宇
    ├── AddressColumn          # 出租房产地址
    ├── OwnerColumn            # 产权人
    ├── CertNoColumn           # 产权证号
    ├── RentAreaColumn         # 出租面积
    ├── TenantColumn           # 承租人
    ├── StartDateColumn        # 租赁开始时间
    ├── EndDateColumn          # 租赁结束时间
    ├── ApprovalDeptColumn     # 批准部门
    ├── ViolationColumn        # 是否违规
    ├── ViolationTypeColumn    # 违规类型
    ├── RectifyMeasureColumn   # 整改措施
    ├── ExistingIssueColumn    # 整改中存在的突出问题
    └── RectifyStatusColumn    # 整改后情况
```

#### 搜索字段
| 字段名 | 类型 | 说明 |
|-------|------|------|
| unitName | string | 单位名称 |
| unitType | string | 单位性质 |
| owner | string | 产权人 |
| certNo | string | 产权证号 |
| tenant | string | 承租人 |
| contractNo | string | 合同编号 |
| status | select | 状态筛选 |

#### 表格列配置
| 列名 | 字段 | 宽度 | 说明 |
|-----|------|------|------|
| 选择 | - | 50px | 复选框 |
| 单位名称 | unitName | 150px | - |
| 填报单位id | reportUnitId | 120px | - |
| 单位性质 | unitType | 100px | - |
| 楼宇 | building | 100px | - |
| 出租房产地址 | address | 200px | - |
| 产权人 | owner | 100px | - |
| 产权证号 | certNo | 120px | - |
| 出租面积 | rentArea | 100px | - |
| 承租人 | tenant | 100px | - |
| 租赁开始时间 | startDate | 120px | - |
| 租赁结束时间 | endDate | 120px | - |
| 批准部门 | approvalDept | 120px | - |
| 是否违规 | violation | 80px | - |
| 违规类型 | violationType | 100px | - |
| 整改措施 | rectifyMeasure | 150px | - |
| 整改中存在的突出问题 | existingIssue | 200px | - |
| 整改后情况 | rectifyStatus | 150px | - |

---

### 3.7 单位卡片页 (UnitCard)

#### 页面布局
- 左侧：树形单位选择器（按区域-单位层级）
- 右侧：单位详情卡片 + 人员编制表格 + 办公面积统计

#### 组件结构
```
UnitCardPage
├── Sidebar                    # 左侧边栏
│   ├── SearchInput            # 关键词搜索
│   ├── ToolBar                # 工具栏（编辑、刷新）
│   └── TreeView               # 树形结构
│       └── TreeNode           # 树节点（省-市-区-单位列表）
└── MainContent                # 主内容区
    ├── UnitInfoCard           # 单位信息卡片
    │   ├── UnitImage          # 单位图片/全景图
    │   ├── BasicInfo          # 基本信息区域
    │   │   ├── UnitName       # 单位名称
    │   │   ├── UnitLevel      # 单位级别（正厅级等）
    │   │   ├── StaffQuota     # 编制人数
    │   │   ├── ActualStaff    # 实有人数
    │   │   ├── Leader         # 分管领导
    │   │   ├── LegalPerson    # 单位法人
    │   │   ├── MobilePhone    # 移动电话
    │   │   ├── OfficePhone    # 办公电话
    │   │   └── Address        # 办公地址
    │   └── ViewPanoramaBtn    # 查看全景照片按钮
    ├── StaffQuotaSection      # 人员编制区域
    │   ├── SectionHeader      # 标题 + 面积核算表按钮
    │   └── QuotaTable         # 编制人数表格
    ├── ActualStaffSection     # 实有人数区域
    │   ├── SectionHeader      # 标题
    │   └── StaffTable         # 实有人数表格
    │       └── Columns        # 市级正职|市级副职|正局(处)级|副局(处)级|局(处)级以下
    ├── OfficeAreaSection      # 办公室使用面积区域
    │   └── AreaInfo           # 面积信息
    └── OfficeAreaByStaffSection  # 办公室使用面积(按实有人数)
        └── AreaTable          # 面积表格
            └── Columns        # 市级正职|市级副职|正局(处)级|副局(处)级|局(处)级以下
```

#### 单位基本信息字段
| 字段名 | 类型 | 说明 |
|-------|------|------|
| unitName | string | 单位名称 |
| unitLevel | string | 单位级别（正厅级、副厅级等） |
| staffQuota | number | 编制人数 |
| actualStaff | number | 实有人数 |
| leader | string | 分管领导 |
| legalPerson | string | 单位法人 |
| mobilePhone | string | 移动电话 |
| officePhone | string | 办公电话 |
| address | string | 办公地址 |
| panoramaImage | string | 全景照片URL |

#### 人员编制/实有人数表格
| 列名 | 字段 | 说明 |
|-----|------|------|
| 市级正职 | cityChief | 市级正职人数 |
| 市级副职 | cityDeputy | 市级副职人数 |
| 正局（处）级 | bureauChief | 正局级人数 |
| 副局（处）级 | bureauDeputy | 副局级人数 |
| 局（处）级以下 | belowBureau | 局级以下人数 |

#### 办公面积统计表格
| 列名 | 字段 | 说明 |
|-----|------|------|
| 市级正职 | cityChiefArea | 市级正职办公面积 |
| 市级副职 | cityDeputyArea | 市级副职办公面积 |
| 正局（处）级 | bureauChiefArea | 正局级办公面积 |
| 副局（处）级 | bureauDeputyArea | 副局级办公面积 |
| 局（处）级以下 | belowBureauArea | 局级以下办公面积 |

#### 功能需求
- 树形结构按区域展示所有单位
- 关键词搜索单位
- 点击单位显示详情卡片
- 查看单位全景照片（弹窗/新页面）
- 面积核算表导出/打印功能
- 人员编制数据展示
- 按级别统计办公面积

---

## 4. 公共组件设计

### 4.1 布局组件

#### MainLayout（主布局）
```
MainLayout
├── Sidebar              # 侧边栏
│   ├── Logo             # 系统Logo
│   ├── UserInfo         # 用户信息
│   └── Menu             # 导航菜单
├── Header               # 顶部栏
│   ├── Collapse         # 折叠按钮
│   ├── Breadcrumb       # 面包屑
│   ├── Fullscreen       # 全屏按钮
│   ├── UserName         # 用户名
│   └── RefreshBtn       # 刷新按钮
└── MainContent          # 主内容区
    ├── TabsView         # 标签页视图
    └── RouterView       # 路由出口
```

### 4.2 通用组件

| 组件名 | 说明 | 使用场景 |
|-------|------|---------|
| SearchForm | 搜索表单组件 | 列表页搜索 |
| DataTable | 数据表格组件 | 数据列表展示 |
| TreeSelect | 树形选择器 | 区域、单位选择 |
| FileUpload | 文件上传组件 | 表单文件上传 |
| StatCard | 统计卡片组件 | 首页数据展示 |
| ChartPanel | 图表面板组件 | 各类图表展示 |

---

## 5. 接口设计

### 5.1 认证接口

```typescript
// 登录
POST /api/auth/login
Request: { username: string, password: string, captcha: string }
Response: { token: string, userInfo: UserInfo }

// 获取验证码
GET /api/auth/captcha
Response: { image: string, key: string }

// 登出
POST /api/auth/logout
```

### 5.2 首页接口

```typescript
// 获取总体概况
GET /api/dashboard/overview
Response: {
  unitCount: number,
  staffCount: number,
  courtyardCount: number,
  buildingCount: number,
  officeArea: number,
  landArea: number
}

// 获取机构类型统计
GET /api/dashboard/org-type-stats
Response: { type: string, count: number }[]

// 获取使用情况统计
GET /api/dashboard/usage-stats
Response: { status: string, count: number, percentage: number }[]

// 获取办公用房面积统计
GET /api/dashboard/area-stats
Response: { category: string, area: number }[]
```

### 5.3 单位管理接口

```typescript
// 获取单位树
GET /api/unit/tree
Response: TreeNode[]

// 获取单位详情
GET /api/unit/:id
Response: {
  id: string,
  unitName: string,
  unitLevel: string,
  staffQuota: number,
  actualStaff: number,
  leader: string,
  legalPerson: string,
  mobilePhone: string,
  officePhone: string,
  address: string,
  panoramaImage: string
}

// 获取人员编制统计
GET /api/unit/:id/staff-quota
Response: {
  cityChief: number,
  cityDeputy: number,
  bureauChief: number,
  bureauDeputy: number,
  belowBureau: number
}

// 获取实有人数统计
GET /api/unit/:id/actual-staff
Response: {
  cityChief: number,
  cityDeputy: number,
  bureauChief: number,
  bureauDeputy: number,
  belowBureau: number
}

// 获取办公面积统计
GET /api/unit/:id/office-area
Response: {
  total: number,
  byLevel: {
    cityChief: number,
    cityDeputy: number,
    bureauChief: number,
    bureauDeputy: number,
    belowBureau: number
  }
}

// 导出面积核算表
GET /api/unit/:id/area-report/export
Response: Blob
```

### 5.4 院落管理接口

```typescript
// 获取区域树
GET /api/courtyard/tree
Response: TreeNode[]

// 获取楼层图纸
GET /api/courtyard/floor-plan/:floorId
Response: { image: string, rooms: RoomInfo[] }

// 绑定房间类型
POST /api/courtyard/bind-type
Request: { roomIds: string[], typeId: string }

// 绑定单位
POST /api/courtyard/bind-unit
Request: { roomIds: string[], unitId: string }
```

### 5.5 业务申请接口

```typescript
// 创建权属申请
POST /api/business/ownership
Request: OwnershipApplicationForm

// 获取申请详情
GET /api/business/ownership/:id
Response: OwnershipApplicationDetail

// 更新申请
PUT /api/business/ownership/:id
Request: OwnershipApplicationForm
```

### 5.6 数据台账接口

```typescript
// 获取出借台账列表
GET /api/ledger/lending
Query: { page, pageSize, unitName?, unitType?, owner?, certNo?, tenant?, contractNo?, status? }
Response: { list: LendingRecord[], total: number }

// 新增出借记录
POST /api/ledger/lending
Request: LendingRecord

// 编辑出借记录
PUT /api/ledger/lending/:id
Request: LendingRecord

// 删除出借记录
DELETE /api/ledger/lending/:id

// 导出出借台账
GET /api/ledger/lending/export
Query: { ...searchParams }
Response: Blob
```

---

## 6. 项目目录结构

```
src/
├── api/                    # API接口
│   ├── auth.ts
│   ├── dashboard.ts
│   ├── unit.ts
│   ├── courtyard.ts
│   ├── business.ts
│   └── ledger.ts
├── assets/                 # 静态资源
│   ├── images/
│   ├── icons/
│   └── styles/
├── components/             # 公共组件
│   ├── layout/
│   │   ├── MainLayout.vue
│   │   ├── Sidebar.vue
│   │   └── Header.vue
│   ├── common/
│   │   ├── SearchForm.vue
│   │   ├── DataTable.vue
│   │   ├── TreeSelect.vue
│   │   ├── FileUpload.vue
│   │   ├── StatCard.vue
│   │   └── ChartPanel.vue
│   └── business/
├── hooks/                  # 组合式函数
│   ├── useTable.ts
│   ├── useForm.ts
│   └── useChart.ts
├── router/                 # 路由配置
│   └── index.ts
├── stores/                 # Pinia状态管理
│   ├── user.ts
│   ├── app.ts
│   └── permission.ts
├── types/                  # TypeScript类型定义
│   ├── api.d.ts
│   ├── components.d.ts
│   └── business.d.ts
├── utils/                  # 工具函数
│   ├── request.ts
│   ├── auth.ts
│   └── common.ts
├── views/                  # 页面视图
│   ├── login/
│   │   └── index.vue
│   ├── dashboard/
│   │   └── index.vue
│   ├── screen/
│   │   └── index.vue
│   ├── unit/               # 单位管理
│   │   ├── organization/   # 组织架构
│   │   ├── edit/           # 单位编辑
│   │   ├── staff/          # 人员信息
│   │   └── card/           # 单位卡片
│   ├── courtyard/
│   │   ├── edit/
│   │   ├── card/
│   │   └── land/
│   ├── business/
│   │   ├── ownership/
│   │   ├── config/
│   │   ├── maintain/
│   │   └── dispose/
│   └── ledger/
│       ├── lending/
│       ├── renting/
│       ├── idle/
│       ├── room/
│       └── leader/
├── App.vue
└── main.ts
```

---

## 7. 主题样式规范

### 7.1 颜色规范

| 用途 | 颜色值 | 说明 |
|-----|-------|------|
| 主色 | #1890ff | 品牌蓝 |
| 侧边栏背景 | #001529 | 深蓝色 |
| 侧边栏激活 | #1890ff | 激活项背景 |
| 成功色 | #52c41a | 操作成功 |
| 警告色 | #faad14 | 警告提示 |
| 错误色 | #f5222d | 错误/删除 |
| 边框色 | #d9d9d9 | 表单边框 |
| 背景色 | #f0f2f5 | 页面背景 |

### 7.2 大屏颜色（深色主题）

| 用途 | 颜色值 |
|-----|-------|
| 背景色 | #0a1628 |
| 面板背景 | rgba(0,20,40,0.8) |
| 边框色 | rgba(0,212,255,0.3) |
| 主文字 | #ffffff |
| 副文字 | rgba(255,255,255,0.65) |
| 强调色 | #00d4ff |

### 7.3 字体规范

| 用途 | 字号 | 字重 |
|-----|------|------|
| 页面标题 | 20px | 600 |
| 卡片标题 | 16px | 500 |
| 正文 | 14px | 400 |
| 辅助文字 | 12px | 400 |
| 大屏标题 | 28px | 700 |
| 大屏数据 | 24px | 600 |

---

## 8. 开发计划

### 第一阶段：基础搭建
- [ ] 项目初始化（Vite + Vue3 + TypeScript）
- [ ] 安装配置依赖（Element Plus, ECharts, Axios等）
- [ ] 配置路由和状态管理
- [ ] 实现主布局框架
- [ ] 实现登录页面

### 第二阶段：核心页面开发
- [ ] 首页/工作台页面
- [ ] 单位卡片页面
- [ ] 院落编辑页面
- [ ] 权属申请页面
- [ ] 出借台账页面

### 第三阶段：数据大屏
- [ ] 大屏布局设计
- [ ] 图表组件开发
- [ ] 地图集成
- [ ] 数据实时更新

### 第四阶段：完善优化
- [ ] 接口联调
- [ ] 权限控制
- [ ] 性能优化
- [ ] 测试修复

---

## 9. 夜间模式（Dark Mode）开发规范

### 9.1 概述

本项目支持日间模式和夜间模式切换。在开发过程中，**所有涉及颜色的修改都必须同时考虑两种模式的兼容性**。

### 9.2 夜间模式选择器

夜间模式通过以下CSS选择器识别：

```css
/* 方式一：data-theme 属性 */
[data-theme='dark'] .your-selector {
  /* 夜间模式样式 */
}

/* 方式二：layui-theme-dark 类名 */
.layui-theme-dark .your-selector {
  /* 夜间模式样式 */
}
```

**建议同时使用两种选择器**，以确保兼容性：

```css
[data-theme='dark'] .your-selector,
.layui-theme-dark .your-selector {
  /* 夜间模式样式 */
}
```

### 9.3 颜色规范

| 场景 | 日间模式 | 夜间模式 |
|-----|---------|---------|
| 页面背景 | #f0f2f5 | #141414 |
| 卡片/面板背景 | #ffffff | #1f1f1f |
| 主文字 | rgba(0,0,0,0.85) | rgba(255,255,255,0.85) |
| 副文字 | rgba(0,0,0,0.45) | rgba(255,255,255,0.45) |
| 边框 | #d9d9d9 | #434343 |
| 顶部导航背景 | var(--global-primary-color) 主色 | #1f1f1f 深色 |
| 图标颜色 | rgba(255,255,255,0.85) | rgba(255,255,255,0.65) |
| 图标悬停 | #fff | var(--global-primary-color) |

### 9.4 开发注意事项

1. **修改颜色时必须检查夜间模式**
   - 任何硬编码的颜色值（如 `#fff`、`#333` 等）都需要考虑夜间模式下的显示效果
   - 优先使用 CSS 变量（如 `var(--global-primary-color)`）

2. **主题色背景元素的特殊处理**
   - 日间模式下使用主题色（`var(--global-primary-color)`）作为背景
   - **夜间模式下需要替换为深色背景**（如 `#1f1f1f`），而不是继续使用主题色
   - 原因：夜间模式整体色调偏暗，彩色主题背景会显得刺眼

3. **图标颜色适配**
   - 在主题色背景上：使用白色图标
   - 在深色背景上（夜间模式）：使用浅灰色图标，悬停时用主题色高亮
   - 示例：
   ```css
   /* 日间模式 - 主题色背景上的白色图标 */
   .header-icon {
     color: rgba(255, 255, 255, 0.85);
   }
   .header-icon:hover {
     color: #fff;
   }

   /* 夜间模式 - 深色背景上悬停用主题色 */
   [data-theme='dark'] .header-icon,
   .layui-theme-dark .header-icon {
     color: rgba(255, 255, 255, 0.65);
   }
   [data-theme='dark'] .header-icon:hover,
   .layui-theme-dark .header-icon:hover {
     color: var(--global-primary-color);
   }
   ```

4. **悬停状态适配**
   - 日间模式（主题色背景）：悬停加亮为纯白
   - 夜间模式（深色背景）：悬停使用主题色提供视觉反馈

5. **背景图片处理**
   - 如果使用带有颜色的背景图片，考虑为夜间模式提供深色版本
   - 或使用 CSS filter 调整图片亮度

6. **测试流程**
   - 开发完成后，务必在系统设置中切换主题测试
   - 检查所有文字、图标、边框、背景的可见性和美观性

### 9.5 示例代码

```css
/* ============================================
   顶部导航示例 - 日间/夜间模式适配
   ============================================ */

/* 日间模式（默认）- 使用主题色背景 */
.top-header {
  background-color: var(--global-primary-color) !important;
}

/* 日间模式 - 图标为白色（在主题色背景上） */
.top-header .layui-nav-item .layui-icon {
  color: rgba(255, 255, 255, 0.85) !important;
}

.top-header .layui-nav-item .layui-icon:hover {
  color: #fff !important;
  background: rgba(255, 255, 255, 0.1) !important;
}

/* ============================================
   夜间模式 - 使用深色背景代替主题色
   ============================================ */
[data-theme='dark'] .top-header,
.layui-theme-dark .top-header {
  background-color: #1f1f1f !important;
}

/* 夜间模式 - 图标颜色稍暗 */
[data-theme='dark'] .top-header .layui-nav-item .layui-icon,
.layui-theme-dark .top-header .layui-nav-item .layui-icon {
  color: rgba(255, 255, 255, 0.65) !important;
}

/* 夜间模式 - 悬停时使用主题色高亮 */
[data-theme='dark'] .top-header .layui-nav-item .layui-icon:hover,
.layui-theme-dark .top-header .layui-nav-item .layui-icon:hover {
  color: var(--global-primary-color) !important;
  background: rgba(255, 255, 255, 0.05) !important;
}
```

### 9.6 核心原则

**日间模式与夜间模式的区别：**

| 元素 | 日间模式 | 夜间模式 |
|-----|---------|---------|
| 导航背景 | 主题色（彩色） | 深色（#1f1f1f） |
| 图标默认色 | 白色（在彩色背景上可见） | 浅灰色（在深色背景上可见） |
| 图标悬停色 | 纯白色 | 主题色（高亮效果） |
| 悬停背景 | 半透明白色 | 半透明白色（更淡） |

**关键点：** 夜间模式下，由于背景变为深色而非主题色，悬停效果需要用主题色来提供视觉反馈。

---

## 10. 备注

1. 本文档基于7张设计稿完整分析生成
2. 接口设计为建议方案，需与后端协商确定
3. 具体实现细节可能根据实际开发需求调整
4. 树形组件在多个页面复用（单位卡片、院落编辑），建议封装为通用组件
